<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="Blues Yu">





<title>ğŸš¨ ä¸è¦å¾€ AMQP çš„ Header ä¹±å¡ä¸œè¥¿ | å¸ƒé²æ–¯é±¼çš„å¦™æƒ³å¤©å¼€</title>



    <link rel="icon" href="/favicon.svg">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


<meta name="generator" content="Hexo 7.3.0"></head>

<body>
    <script>
        // this function is used to check current theme before page loaded.
        (() => {
            const currentTheme = window.localStorage && window.localStorage.getItem('theme') || '';
            const isDark = currentTheme === 'dark';
            const pagebody = document.getElementsByTagName('body')[0]
            if (isDark) {
                pagebody.classList.add('dark-theme');
                // mobile
                document.getElementById("mobile-toggle-theme").innerText = "Â· Dark"
            } else {
                pagebody.classList.remove('dark-theme');
                // mobile
                document.getElementById("mobile-toggle-theme").innerText = "Â· Light"
            }
        })();
    </script>

    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">å¸ƒé²æ–¯é±¼çš„å¦™æƒ³å¤©å¼€</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">æŠ€æœ¯</a>
                
                    <a class="menu-item" href="/category">ç”Ÿæ´»</a>
                
                    <a class="menu-item" href="/tag">æ ‡ç­¾</a>
                
                    <a class="menu-item" href="/about">å…³äºæˆ‘</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">å¸ƒé²æ–¯é±¼çš„å¦™æƒ³å¤©å¼€</a><a id="mobile-toggle-theme">Â·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">æŠ€æœ¯</a>
                
                    <a class="menu-item" href="/category">ç”Ÿæ´»</a>
                
                    <a class="menu-item" href="/tag">æ ‡ç­¾</a>
                
                    <a class="menu-item" href="/about">å…³äºæˆ‘</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
            <div class="main">
                <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    var tocbot_timer;
    var DEPTH_MAX = 6; // ä¸º 6 æ—¶å±•å¼€æ‰€æœ‰
    var tocbot_default_config = {
        tocSelector: '.tocbot-list',
        contentSelector: '.post-content',
        headingSelector: 'h1, h2, h3, h4, h5',
        orderedList: false,
        scrollSmooth: true,
        onClick: extend_click,
    };

    function extend_click() {
        clearTimeout(tocbot_timer);
        tocbot_timer = setTimeout(function() {
            tocbot.refresh(obj_merge(tocbot_default_config, {
                hasInnerContainers: true
            }));
        }, 420); // è¿™ä¸ªå€¼æ˜¯ç”± tocbot æºç é‡Œå®šä¹‰çš„ scrollSmoothDuration å¾—æ¥çš„
    }

    document.ready(function() {
        tocbot.init(obj_merge(tocbot_default_config, {
            collapseDepth: 1
        }));
    });

    function expand_toc() {
        var b = document.querySelector('.tocbot-toc-expand');
        var expanded = b.getAttribute('data-expanded');
        expanded ? b.removeAttribute('data-expanded') : b.setAttribute('data-expanded', true);
        tocbot.refresh(obj_merge(tocbot_default_config, {
            collapseDepth: expanded ? 1 : DEPTH_MAX
        }));
        b.innerText = expanded ? 'Expand all' : 'Collapse all';
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

    function obj_merge(target, source) {
        for (var item in source) {
            if (source.hasOwnProperty(item)) {
                target[item] = source[item];
            }
        }
        return target;
    }
</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">ğŸš¨ ä¸è¦å¾€ AMQP çš„ Header ä¹±å¡ä¸œè¥¿</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">Blues Yu</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">November 17, 2021&nbsp;&nbsp;20:24:32</a>
                        </span>
                    
                    
                </div>
            
        </header>

        <div class="post-content">
            <h2 id="å‰æƒ…æè¦"><a href="#å‰æƒ…æè¦" class="headerlink" title="å‰æƒ…æè¦"></a>å‰æƒ…æè¦</h2><p>ä¸€ç›´ä»¥æ¥ï¼Œæˆ‘ä»¬åœ¨ Python é¡¹ç›®ä¸­çš„åå°ä»»åŠ¡éƒ½æ˜¯ä½¿ç”¨ celery æ­é… Redis(ä½œä¸º broker)æ¥å®Œæˆï¼ŒåŒæ—¶é’ˆå¯¹çŸ­ä»»åŠ¡è½®è¯¢åœºæ™¯æˆ‘ä»¬ä¹Ÿ<a target="_blank" rel="noopener" href="https://github.com/TencentBlueKing/bkpaas-python-sdk/tree/master/sdks/blue-krill/blue_krill/async_utils">åšäº†ä¸€äº›å°è£…</a>ã€‚åœ¨é¡¹ç›®è¿è¡Œçš„ä¸‰~å››å¹´é—´ï¼Œè¿™å¥—æ–¹æ¡ˆå®Œç¾åœ°æ‰¿è½½äº†æˆ‘ä»¬æ ¸å¿ƒåŠŸèƒ½ã€‚</p>
<p>ç„¶è€Œï¼Œå°±åœ¨ä¸ä¹…å‰çš„ä¸€å‘¨ï¼Œå‡ºç°ä¸€äº›æ¯”è¾ƒè¯¡å¼‚çš„é—®é¢˜ï¼Œæ€»æ˜¯æœ‰äº›åå°ä»»åŠ¡å‘ç”Ÿé˜»å¡ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„å¤šç§å¼‚å¸¸è§‚æµ‹æ‰‹æ®µï¼ˆ<a target="_blank" rel="noopener" href="https://sentry.io/">Sentry</a>ã€æ—¥å¿—ç­‰ï¼‰éƒ½æ— æ³•å‡†ç¡®å®šä½åˆ°å…·ä½“é—®é¢˜ï¼ˆè¿™æˆ–è®¸æ˜¯å¦ä¸€ä¸ªæ•…äº‹ï¼‰ï¼Œäºæ˜¯æ­»é©¬å½“æ´»é©¬åŒ»ï¼Œæˆ‘ä»¬å†³å®šå°† Redis æ›´æ¢ä¸º RabbitMQï¼Œè¿™æ ·èƒ½å¤Ÿæ›´ä¸ºå‡†ç¡®åœ°è§‚æµ‹åˆ°ä»»åŠ¡å…·ä½“æ‰§è¡Œçš„æ¶ˆæ¯æƒ…å†µï¼ˆä¾‹å¦‚æ˜¯å¦åŠæ—¶Ackï¼‰ã€‚</p>
<h2 id="æ¡ˆå‘ç°åœº"><a href="#æ¡ˆå‘ç°åœº" class="headerlink" title="æ¡ˆå‘ç°åœº"></a>æ¡ˆå‘ç°åœº</h2><p>æ›´æ¢å®Œ broker ä¹‹åï¼Œå´å‘ç°äº†å¦ä¸€ä¸ªå¥‡æ€ªçš„é—®é¢˜ï¼ˆæ²¡é”™ï¼Œè¿™æ‰æ˜¯æœ¬æ–‡çš„ä¸»è§’ï¼‰ã€‚æˆ‘ä»¬åœ¨æŸä¸€äº›ç‰¹æ®Šèµ„æºçš„åœºæ™¯ä¸‹ï¼Œcelery ä»»åŠ¡ä¼šç›´æ¥æŠ¥é”™ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">ConnectionResetError: [Errno <span class="number">104</span>] Connection reset by peer</span><br><span class="line">  File <span class="string">&quot;kombu/connection.py&quot;</span>, line <span class="number">414</span>, <span class="keyword">in</span> _reraise_as_library_errors</span><br><span class="line">    <span class="keyword">yield</span></span><br><span class="line">  File <span class="string">&quot;kombu/connection.py&quot;</span>, line <span class="number">494</span>, <span class="keyword">in</span> _ensured</span><br><span class="line">    <span class="keyword">return</span> fun(*args, **kwargs)</span><br><span class="line">  File <span class="string">&quot;kombu/messaging.py&quot;</span>, line <span class="number">203</span>, <span class="keyword">in</span> _publish</span><br><span class="line">    mandatory=mandatory, immediate=immediate,</span><br><span class="line">  File <span class="string">&quot;amqp/channel.py&quot;</span>, line <span class="number">1766</span>, <span class="keyword">in</span> _basic_publish</span><br><span class="line">    (<span class="number">0</span>, exchange, routing_key, mandatory, immediate), msg</span><br><span class="line">  File <span class="string">&quot;amqp/abstract_channel.py&quot;</span>, line <span class="number">59</span>, <span class="keyword">in</span> send_method</span><br><span class="line">    conn.frame_writer(<span class="number">1</span>, <span class="variable language_">self</span>.channel_id, sig, args, content)</span><br><span class="line">  File <span class="string">&quot;amqp/method_framing.py&quot;</span>, line <span class="number">154</span>, <span class="keyword">in</span> write_frame</span><br><span class="line">    <span class="number">2</span>, channel, framelen, frame, <span class="number">0xce</span>))</span><br><span class="line">  File <span class="string">&quot;amqp/transport.py&quot;</span>, line <span class="number">305</span>, <span class="keyword">in</span> write</span><br><span class="line">    <span class="variable language_">self</span>._write(s)</span><br></pre></td></tr></table></figure>

<p>ç”±äºæˆ‘ä»¬ä½¿ç”¨äº†ä¸€å±‚ <a target="_blank" rel="noopener" href="https://cloud.tencent.com/product/clb">CLB</a> ä½œä¸ºé«˜å¯ç”¨ä»£ç†ï¼Œè€Œä¹‹å‰çš„ä½¿ç”¨ç»éªŒä¸­ï¼ŒCLB å¯èƒ½ä¼šæœ‰ä¸€äº›é•¿æ—¶é—´æ— æ•°æ®æ–­è¿çš„æƒ…å†µï¼Œæ‰€ä»¥æˆ‘ä»¬æš‚æ—¶è®¤ä¸ºå¯èƒ½æ˜¯æŸäº›é•¿æ—¶é—´çš„é˜»å¡ä»»åŠ¡ä¼šå¯¼è‡´ CLB ä¸»åŠ¨æ–­å¼€ï¼Œä¸ºäº†æ’é™¤å¹²æ‰°ï¼Œæˆ‘ä»¬ç”©å¼€äº† CLBï¼Œç›´æ¥é‡‡ç”¨ MQ çš„å¤šä¸ªèŠ‚ç‚¹ä½œä¸ºåœ°å€ç›´è¿ã€‚</p>
<p>ç„¶è€Œï¼Œé—®é¢˜ä¾æ—§ï¼Œä¸€æ—¶é—´åˆæ²¡äº†å¤´ç»ªï¼Œæˆ‘å¼€å§‹æ¼«æ— ç›®çš„é‡æ–°æµè§ˆ Sentry ä¸­çš„é”™è¯¯å †æ ˆä»¥åŠç›¸å…³å˜é‡ã€‚</p>
<h2 id="è››ä¸é©¬è¿¹"><a href="#è››ä¸é©¬è¿¹" class="headerlink" title="è››ä¸é©¬è¿¹"></a>è››ä¸é©¬è¿¹</h2><p>æ— æ„é—´ï¼Œå‘ç°åœ¨ä»£ç ä¸­ï¼Œæˆ‘ä»¬å°è¯•å‘é˜Ÿåˆ—ä¸­å­˜å‚¨ä¸€å¤§æ®µ pickle è¿‡çš„å¯¹è±¡æ•°æ®ï¼Œè€Œè¿™äº›å˜é‡åœ¨ Sentry ä¸­å·²ç»é•¿åˆ°æ— æ³•å®Œæ•´æ˜¾ç¤ºè€Œè¢«çœç•¥äº†ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">any_task.apply_async(headers=something_big)</span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªé—®é¢˜ç«‹é©¬å¼•èµ·äº†æˆ‘ä»¬çš„æ³¨æ„ğŸ¤”ï¼Œå¾ˆæœ‰å¯èƒ½æ˜¯è¿™ä¸ªæ•°æ®è¿‡å¤§è€Œå¼•èµ·å†™å…¥å¼‚å¸¸ã€‚</p>
<h2 id="ç ´æ¡ˆ"><a href="#ç ´æ¡ˆ" class="headerlink" title="ç ´æ¡ˆ"></a>ç ´æ¡ˆ</h2><p>ç…§æ­¤æ€è·¯ï¼Œç»è¿‡ä¸€ç•ªç½‘ç»œå†²æµªï¼Œå‘ç°äº†ç±»ä¼¼çš„é—®é¢˜ï¼š</p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/30716002/is-there-a-size-limit-on-a-rabbitmq-message-header"></a></p>
<p>è¿™æ—¶å€™ï¼Œå†å»åæŸ¥ RabbitMQ çš„æ—¥å¿—ï¼Œæœç„¶æœ‰å¯¹åº”å†…å®¹ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">2021-11-16 19:49:32.098 [error] &lt;0.3894.1636&gt; Error on AMQP connection &lt;0.3894.1636&gt; (x.x.x.x:59823 -&gt; x.x.x.x:5672, vhost: &#x27;foo&#x27;, user: &#x27;foo&#x27;, state: running), channel 1:</span><br><span class="line"> operation none caused a connection exception frame_error: &quot;type 2, all octets = &lt;&lt;&gt;&gt;: &#123;frame_too_large,245629,131064&#125;&quot;</span><br><span class="line"></span><br><span class="line">2021-11-16 19:49:35.099 [error] &lt;0.3894.1636&gt; closing AMQP connection &lt;0.3894.1636&gt; (x.x.x.x:59823 -&gt; x.x.x.x:5672):</span><br><span class="line">fatal_frame_error</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œéå¸¸æ˜ç¡®åœ°æŒ‡å‡ºäº†ï¼Œç”±äºæˆ‘ä»¬ä¼ é€’çš„ frame å¤§å°(245629 bytes) å¤§äºé»˜è®¤çš„ 131064 + 8(frame header) bytes (128KB)ï¼Œæ‰€ä»¥ RabbitMQ å…³é—­äº†è¿æ¥ã€‚</p>
<p>äºæ˜¯æˆ‘ä»¬ç«‹å³ç€æ‰‹ï¼Œç²¾ç®€äº†å‘ <code>headers</code> ä¼ é€çš„æ•°æ®ï¼Œé‡æ–°å‘å¸ƒåï¼Œç»ˆäºä¸€åˆ‡å½’äºæ­£å¸¸ã€‚</p>
<h2 id="æ¢³ç†"><a href="#æ¢³ç†" class="headerlink" title="æ¢³ç†"></a>æ¢³ç†</h2><p>è™½ç„¶é—®é¢˜å·²ç»å¾—åˆ°äº†è§£å†³ï¼Œä½†æ˜¯ä»æ—§éœ€è¦è¡¥é½ä¸€ä¸‹ç›¸å…³çŸ¥è¯†çš„çŸ­æ¿ã€‚</p>
<p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬å†æ¥ç®€å•çœ‹çœ‹ <strong>AMQP</strong>  <a target="_blank" rel="noopener" href="https://www.rabbitmq.com/resources/specs/amqp0-9-1.pdf">0.9.1 ç‰ˆæœ¬</a> <strong>åè®®æœ‰å…³è¿™éƒ¨åˆ†çš„å†…å®¹</strong>ã€‚</p>
<h3 id="AMQP-åè®®"><a href="#AMQP-åè®®" class="headerlink" title="AMQP åè®®"></a>AMQP åè®®</h3><p>è¿™æ˜¯åè®®ä¸­æ‰€æœ‰ TCP&#x2F;IP å¸§ç»„æˆ</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">0      1         3         7                 size+7 size+8</span><br><span class="line">+------+---------+---------+ +-------------+ +-----------+</span><br><span class="line">| type | channel |   size  | |   payload   | | frame-end |</span><br><span class="line">+------+---------+---------+ +-------------+ +-----------+</span><br><span class="line"> octet    short      long      &#x27;size&#x27; octets     octet</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­æœ‰è¿™ä¹ˆå‡ ä¸ªå…³é”®ä¿¡æ¯ï¼š</p>
<ul>
<li>0-7 bytes ç¡®å®šäº†å¸§çš„ç±»å‹å’Œå…·ä½“çš„ channelï¼Œç¡®å®šäº†ç±»å‹åå°†ä¼šå¤„ç† payload</li>
<li>payload çš„å¤§å°åœ¨åè®®ä¸­å¹¶æ²¡æœ‰è§„å®šï¼Œè€Œæ˜¯è¯´çš„æ˜¯å¯ä»¥é€šè¿‡å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯çš„â€åå•†â€œç¡®å®š(page 22)</li>
<li>ä¸åŒç±»å‹å¸§æœ‰ç€ä¸åŒçš„ payload æ„æˆ</li>
</ul>
<p>å½“å‰é—®é¢˜ä¸»è¦æ˜¯ä¼ é€’åº”ç”¨æ•°æ®çš„åœºæ™¯ä¸‹ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥çœ‹å…·ä½“æ‰¿è½½çš„ Content å¸§</p>
<p>ç®€å•ç‚¹æ¥è¯´ï¼ŒContent å¸§å°±æ˜¯ä¸€ç³»åˆ—çš„ properties åŠ ä¸ŠäºŒè¿›åˆ¶çš„æ•°æ®éƒ¨åˆ†ã€‚è¿™äº› properties å°†ä¼šç»„æˆ â€œcontent header frameâ€ï¼Œå®ƒå¤§æ¦‚æ˜¯è¿™æ ·çš„ç»„æˆï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">0          2        4           12               14</span><br><span class="line">+----------+--------+-----------+----------------+------------- - -</span><br><span class="line">| class-id | weight | body size | property flags | property list...</span><br><span class="line">+----------+--------+-----------+----------------+------------- - -</span><br><span class="line">    short    short    long long        short        remainder...</span><br></pre></td></tr></table></figure>

<p>ä¹Ÿå°±æ˜¯åœ¨æˆ‘ä»¬çš„ celery ä»£ç ä¸­ï¼Œ <code>headers=(...)</code> ä¼ é€’çš„å†…å®¹å°†ä¼šè¢«å¡å…¥ property list ä¸­ï¼Œåœ¨åè®®ä¸­å¹¶æ²¡æœ‰æ˜ç¡®å…·ä½“çš„å¤§å°é™åˆ¶ï¼ŒåŒæ—¶æ²¡æœ‰è¡¨æ˜ä¼šåšçš„åˆ†å—(content body éƒ¨åˆ†æ˜¯ä¼šçš„)ï¼Œæ‰€ä»¥å½“å‰äº§ç”Ÿçš„é—®é¢˜é™åˆ¶ï¼Œä¸»è¦å—åˆ¶äº RabbitMQ çš„å…·ä½“å®ç°ã€‚</p>
<p><img src="/../images/%F0%9F%9A%A8%20%E4%B8%8D%E8%A6%81%E5%BE%80%20AMQP%20%E7%9A%84%20Header%20%E4%B9%B1%E5%A1%9E%E4%B8%9C%E8%A5%BF/file-20250207202819086.png"><br><a target="_blank" rel="noopener" href="https://blog.rabbitmq.com/posts/2012/11/breaking-things-with-rabbitmq-3-0/">https://blog.rabbitmq.com/posts/2012/11/breaking-things-with-rabbitmq-3-0/</a></p>
<h2 id="ä¸‰ç‚¹æ„Ÿæ‚Ÿ"><a href="#ä¸‰ç‚¹æ„Ÿæ‚Ÿ" class="headerlink" title="ä¸‰ç‚¹æ„Ÿæ‚Ÿ"></a>ä¸‰ç‚¹æ„Ÿæ‚Ÿ</h2><ul>
<li><strong>é”™è¯¯ç›‘æµ‹éå¸¸é‡è¦</strong>ã€‚å¦‚æœæ²¡æœ‰ Sentryï¼Œé—®é¢˜çš„å®šä½å¯èƒ½ä¼šæ›´åŠ å›°éš¾ï¼Œå¤šè€—å‡ å¤©ç²¾åŠ›ä¹Ÿæœªå¯çŸ¥ã€‚</li>
<li><strong>è¦å–„äºåˆ©ç”¨ä¸åŒç»„ä»¶çš„ä¼˜åŠ¿</strong>ã€‚ä¹‹æ‰€ä»¥ä¸€å¼€å§‹ä½¿ç”¨ Redis è€Œä¸æ˜¯ RabbitMQï¼Œæ›´å¤šæ˜¯ä»è¿è¥ç»´æŠ¤çš„è§’åº¦å‡ºå‘ï¼Œåœ¨å…¬å¸å†…éƒ¨ Redis æœ‰æ›´å®Œå–„çš„åŸºå»ºåŸºç¡€ï¼Œè€Œ RabbitMQ çš„è¿ç»´æ›´åŠ å¤æ‚ã€‚ä½†æ˜¯é‡åˆ°åƒè¿™æ ·å¹½çµèˆ¬çš„é—®é¢˜æ—¶ï¼ŒRabbitMQ åè€Œæ›´æœ‰ä¼˜åŠ¿ï¼Œå®Œå–„çš„æµç¨‹æ›´å®¹æ˜“æš´éœ²é—®é¢˜ã€‚</li>
<li><strong>è¦é€‚å½“åœ°äº†è§£é‡ç‚¹ä¾èµ–çš„æŠ€æœ¯ç»†èŠ‚</strong>ã€‚å¤§å¤šæ•°åœºæ™¯ä¸‹ï¼Œç®€å•åœ°ä½¿ç”¨åè®®å°±è¶³å¤Ÿäº†ï¼Œè€Œåœ¨ä¸€äº›è¾¹ç¼˜åœºæ™¯ä¸­ï¼Œåˆ™æ›´çœ‹é‡æŠ€æœ¯äººå‘˜å¯¹ç»†èŠ‚çš„æŠŠæ§ã€‚è¿™ç±»å±äºé‡è¦ä¸ç´§æ€¥çš„äº‹æƒ…ï¼Œåº”è¯¥å®šæ—¶æ‹¿å‡ºæ¥æœ‰æ„è¯†å»åšï¼Œè™½æ— è¿‘ç”¨ï¼Œå´æœ‰è¿œç›Šã€‚</li>
</ul>
<p>å‚è€ƒï¼š</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.rabbitmq.com/resources/specs/amqp0-9-1.pdf">https://www.rabbitmq.com/resources/specs/amqp0-9-1.pdf</a></li>
<li><a target="_blank" rel="noopener" href="https://john.eckersberg.com/debugging-rabbitmq-frame_too_large-error.html">https://john.eckersberg.com/debugging-rabbitmq-frame_too_large-error.html</a></li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/30716002/is-there-a-size-limit-on-a-rabbitmq-message-header">https://stackoverflow.com/questions/30716002/is-there-a-size-limit-on-a-rabbitmq-message-header</a></li>
<li><a target="_blank" rel="noopener" href="https://www.rabbitmq.com/amqp-0-9-1-errata.html#section_11">https://www.rabbitmq.com/amqp-0-9-1-errata.html#section_11</a></li>
</ul>

        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>Blues Yu</span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>Permalink:</span>
                        <span><a href="https://emergencyexit.xyz/amqp-header-has-frame-max-limit.html">https://emergencyexit.xyz/amqp-header-has-frame-max-limit.html</a></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>License:</span>
                        <span>Copyright (c) 2025 <a target="_blank" rel="noopener" href="http://creativecommons.org/licenses/by-nc/4.0/">CC-BY-NC-4.0</a> LICENSE</span>
                    </p>
                
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/python/"># python</a>
                    
                        <a href="/tags/tech/"># tech</a>
                    
                        <a href="/tags/amqp/"># amqp</a>
                    
                        <a href="/tags/celery/"># celery</a>
                    
                        <a href="/tags/tcp/"># tcp</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>Â· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/use-graphql-with-django.html">ç”¨ GraphQL æŸ¥è¯¢ä½ çš„ Django åº”ç”¨</a>
            
            
            <a class="next" rel="next" href="/helm-pratices.html">ğŸ’© ä¸€äº› Helm æœ€(toÌ€ng)ä½³(kuÌŒ)å®è·µ</a>
            
        </section>


    </article>
</div>

            </div>
            <footer id="footer" class="footer">
    <div class="copyright">
        <span>Â© Blues Yu | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
</body>

</html>